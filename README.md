# Concurrent calculation of the Leibniz series #

## About ##

This project implements a concurrent solution in the Java programming language to the calculation of the [Leibniz infinite series](https://en.wikipedia.org/wiki/Leibniz_formula_for_pi) to determine an approximation to π. Despite its slow convergence, the Leibniz formula is effective to calculate π with high precision (hundreds of digits or more). The number of computed terms determines the precision of the value for π.

In this solution, each _i_-th term of the series is calculated by an independent thread, whose partial result is temporarily stored in memory into a list of values. After computing all the terms, they are aggregated by summing all the stored partial values.

A **barrier** is used to synchronize all the threads used to calculate the terms, enabling the aggregation to happen only when all of them have concluded their respective calculation. If a thread concludes its respective calculation before the others, it is suspended and waits for the others to conclude, automatically controlled by the barrier.

The barrier is implemented by a [`Barrier`](https://docs.oracle.com/javase/19/docs/api/java/util/concurrent/CyclicBarrier.html) object, available among the facilities provided by the [`java.util.concurrent` package](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/concurrent/package-summary.html). This object is instantiated by providing the number of threads to synchronize (corresponding to the number of terms to determine for the series) and, optionally, a [`Runnable`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Runtime.html) object codifying the statements to be executed after all threads have finished their respective tasks. In this case, such a `Runnable` object executes the sum of the values of each of the terms computed by the threads.

## Repository structure ##

Source code in this repository is organized as follows:

```
+─pi-leibniz                    ---> Project directory
  ├─── doc                      ---> Directory with HTML pages resulted from generated Javadoc
  └─── src                      ---> Directory with source code files
       └─── CalcThread.java     ---> Thread to compute a term of the series
       └─── PiLeibniz.java      ---> Main program class
       └─── SumAggregator.java  ---> Aggregator to sum the computed values for the terms
```

After cloning this repository with `git clone` to your local file system, you can import it to your preferred IDE.
[Java Development Kit (JDK)](https://www.oracle.com/java/technologies/downloads/) is required to develop with and run
this program. HTML documentation is generated by running the `javadoc` command.

## Caveat ##

The computation of the approximation to π with thousands of terms (threads) is likely to make the program fail due to the following error: **_RuntimeError: can't start new thread__**. This exception is caused when the runtime environment asks the underlying operating system for a new thread, but the operating system refuses to allocate the thread.
